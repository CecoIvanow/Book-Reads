<li class="comment-item">
    <mat-card>
        <mat-card-header>
            <img mat-card-avatar
                src="https://as2.ftcdn.net/v2/jpg/03/31/69/91/1000_F_331699188_lRpvqxO5QRtwOM05gR50ImaaJgBx68vi.jpg">
            <div class="comment-header-content">
                <div class="comment-meta">
                    <span class="comment-author">{{comment.owner?.firstName}}
                        {{comment.owner?.lastName}}</span>
                    <span class="comment-date">â€¢ {{comment._createdOn | date}}</span>
                </div>
                <mat-card-subtitle class="comment-book">
                    On <a [routerLink]="[`/books/details/${comment.bookId}`]">{{comment.book?.title}}</a>
                </mat-card-subtitle>
            </div>
        </mat-card-header>
        <mat-card-content>
            @if (getClickedCommentId !== comment._id) {
            <div class="comment-content">
                <p>{{comment.content}}</p>
            </div>
            } @else {
            <form (ngSubmit)="onSubmit()" [formGroup]="commentForm">
                <mat-form-field appearance="outline">
                    <input matInput type="text" formControlName="content">
                </mat-form-field>

                <mat-card-actions class="comment-actions">
                    <div>
                        <button class="edit-button" matButton="text" type="submit">Save</button>
                        <button type="button" class="delete-button" matButton="filled"
                            (click)="setClickedCommentId.emit(null)">Cancel</button>
                    </div>
                </mat-card-actions>
            </form>
            }
        </mat-card-content>

        @if (getClickedCommentId !== comment._id) {
        <mat-card-actions class="comment-actions">
            @if (userSession.userId() === comment._ownerId) {
            <button class="edit-button" matButton="text"
                (click)="onEditClick()">Edit</button>
            <button class="delete-button" matButton="filled" (click)="delete.emit(comment._id)">Delete</button>
            }
        </mat-card-actions>
        }
    </mat-card>
</li>